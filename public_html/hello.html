                                <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
                                <html xmlns="http://www.w3.org/1999/xhtml">

                                   <head>

                                       <meta http-equiv="X-UA-Compatible" content="IE=edge;" />


                                        <style type="text/css">

                                            #map_canvas {

                                                width:   630px;

                                                height:  660px;

                                               margin:  0;

                                                padding: 0;

                                                top:auto;

                                                padding-top:0;



                                                padding-left:0;



                                            }



                                            .my-other-marker {

                                                opacity: .7;

                                                padding: 7px;

                                                text-align: center;

                                                font-family: "Times New Roman", Times, serif;

                                                text-decoration-color:black; 

                                                font-size: 16px;

                                                margin: 1 px 1px 1px 1px;

                                                border: solid 3px #CCCCCC;

                                                float:left;

                                                background-color: white;

                                                padding: 12px;

                                                box-shadow: 1px 2px 5px black;

					

                                                color : black;

                                                text-shadow: 0px 0px 2px #0F1642;		

                                            }









                                            /**********  Legend style sheet start here  **********/







                                            .hidden {display:none}



                                            .my-legend .legend-title {



                                                text-align: left;



                                                margin-bottom: 5px;



                                                font-weight: bold;



                                                font-size: 90%;



                                            }



                                            .my-legend .legend-scale ul {



                                                margin: 0;



                                                margin-bottom: 5px;



                                                padding: 0;



                                                float: Left;



                                                list-style: none;



                                            }



                                            .my-legend .legend-scale ul li {



                                                font-size: 85%;



                                                list-style: none;



                                                margin-left: 0;



                                                line-height: 15px;



                                                margin-bottom: 0px;



                                            }



                                            .my-legend ul.legend-labels li span {



                                                display: block;



                                                float:left;



                                                height: 10px;



                                                width: 25px;



                                                margin: 1px;



                                                margin-right: 15px;



                                                margin-left: 3px;



                                                border: 1px solid #999;



                                            }



                                            .my-legend .legend-source {



                                                font-size: 70%;



                                                color: #999;



                                                clear: both;



                                            }



                                            .my-legend a {



                                                color: #777;



                                            }

                                            /**********  Legend style sheet end here  **********/

                                            #loaddiv

                                            {           
                                                BORDER-RIGHT: #785e4f 4px groove;



                                                PADDING-RIGHT: 20px;



                                                BORDER-TOP: #785e4f 4px groove;



                                                PADDING-LEFT: 20px;



                                                FONT-WEIGHT: bold;



                                                Z-INDEX: 100;



                                                FILTER: alpha(opacity=75);



                                                LEFT:45%;



                                                PADDING-BOTTOM: 20px;



                                                MARGIN-LEFT: auto;



                                                BORDER-LEFT: #785e4f 4px groove;



                                                WIDTH: 250px;



                                                MARGIN-RIGHT: auto;



                                                PADDING-TOP: 20px;



                                                BORDER-BOTTOM: #785e4f 4px groove;



                                                POSITION: absolute;



                                                TOP:50%;



                                                BACKGROUND-COLOR: #FFFFFF; /* BACKGROUND-COLOR: #e7b047; */



                                                TEXT-ALIGN: center;



                                                opacity: .75



                                            }



                                            .infowindow * {font-size: 90%; margin: 0}











                                            #legend {



                                                font-family: Arial, sans-serif;



                                                background: #fff;



                                                padding: 1%;



                                                margin: 1%;



                                                height: auto;



                                                width:25%;



                                                padding-bottom:0;



                                                border: 3px solid #000;



                                            }



                                            #legend h3 {



                                                margin-top: 0;



                                            }



                                            #legend img {



                                                vertical-align: middle;



                                            }



                                        </style>

                                        <script type="text/javascript">

                       //     var $jq = jQuery.noConflict();

                            var sidebarHtml = "";

                            var sidebarHtml1 = "";

                            var infowindow = null;

                            var kmlLayer = null;

                            var geoXml = null;

                            var geoXmlDoc = null;

                            var map = null;

                            var myLatLng = null;

                            var myGeoXml3Zoom = true;



                            var div = null;

                            var div1 = null;

                            var div2 = null;

                            var div3 = null;

                            var marker, marker2, marker3, marker4;







                            var filename = "http://mobility.center/vispertaltunnel2/VISPERTALTUNNEL4/libararies/Str_10202015.kml";

                            //var geocoder = new google.maps.Geocoder();



                            function MapTypeId2UrlValue(maptype) {



                                var urlValue = 'm';

                                switch (maptype) {



                                    case google.maps.MapTypeId.HYBRID:

                                        urlValue = 'h';

                                        break;

                                    case google.maps.MapTypeId.SATELLITE:

                                        urlValue = 'k';

                                        break;

                                    case google.maps.MapTypeId.TERRAIN:

                                        urlValue = 't';

                                        break;

                                    default:



                                    case google.maps.MapTypeId.ROADMAP:

                                        urlValue = 'm';

                                        break;

                                }



                                return urlValue;

                            }







                            // ========== This function will create the "link to this page"



                            function makeLink() {



                                //        var a="http://www.geocodezip.com/v3_MW_example_linktothis.html"



                                var url = window.location.pathname;

                                var a = url.substring(url.lastIndexOf('/') + 1)



                                        + "?lat=" + map.getCenter().lat().toFixed(6)



                                        + "&lng=" + map.getCenter().lng().toFixed(6)



                                        + "&zoom=" + map.getZoom()



                                        + "&type=" + MapTypeId2UrlValue(map.getMapTypeId());

                                if (filename != "TrashDays40.xml")

                                    a += "&filename=" + filename;

                                //  document.getElementById("link").innerHTML = '<a href="' +a+ '">Link to this page<\/a>';



                            }



                            function initialize() {



                                myLatLng = new google.maps.LatLng(46.293578, 7.884922);

                                // these set the initial center, zoom and maptype for the map 



                                // if it is not specified in the query string



                                var lat = 46.293578;

                                var lng = 7.884922;

                                var zoom = 13;

                                var maptype = google.maps.MapTypeId.ROADMAP;

                                // If there are any parameters at eh end of the URL, they will be in  location.search



                                // looking something like  "?marker=3"







                                // skip the first character, we are not interested in the "?"



                                var query = location.search.substring(1);

                                // split the rest at each "&" character to give a list of  "argname=value"  pairs



                                var pairs = query.split("&");

                                for (var i = 0; i < pairs.length; i++) {



                                    // break each pair at the first "=" to obtain the argname and value



                                    var pos = pairs[i].indexOf("=");

                                    var argname = pairs[i].substring(0, pos).toLowerCase();

                                    var value = pairs[i].substring(pos + 1).toLowerCase();

                                    // process each possible argname  -  use unescape() if theres any chance of spaces



                                    if (argname == "id") {

                                        id = unescape(value);

                                    }



                                    if (argname == "filename") {

                                        filename = unescape(value);

                                    }



                                    if (argname == "marker") {

                                        index = parseFloat(value);

                                    }



                                    if (argname == "lat") {

                                        lat = parseFloat(value);

                                    }



                                    if (argname == "lng") {

                                        lng = parseFloat(value);

                                    }


                                    if (argname == "zoom") {



                                        zoom = parseInt(value);

                                        myGeoXml3Zoom = false;

                                    }



                                    if (argname == "type") {



                                        // from the v3 documentation 8/24/2010



                                        // HYBRID This map type displays a transparent layer of major streets on satellite images. 



                                        // ROADMAP This map type displays a normal street map. 



                                        // SATELLITE This map type displays satellite images. 



                                        // TERRAIN This map type displays maps with physical features such as terrain and vegetation. 



                                        if (value == "m") {

                                            maptype = google.maps.MapTypeId.ROADMAP;

                                        }



                                        if (value == "k") {

                                            maptype = google.maps.MapTypeId.SATELLITE;

                                        }



                                        if (value == "h") {

                                            maptype = google.maps.MapTypeId.HYBRID;

                                        }



                                        if (value == "t") {

                                            maptype = google.maps.MapTypeId.TERRAIN;

                                        }







                                    }



                                }



                                if (!isNaN(lat) && !isNaN(lng)) {



                                    myLatLng = new google.maps.LatLng(lat, lng);

                                }



                                var myOptions = {

                                    zoom: zoom,

                                    center: myLatLng,

                                    //  zoom: 15,



                                    // center: myLatlng,



                                    mapTypeId: maptype



                                };

                                map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);

                                //------------------------------------------------------------------------





                                var legend = document.getElementById('legend');

                                $(function () {



                                    $(legend).removeClass('hidden');

                                });







                               marker = new RichMarker({

                                    map: map,

                                    position: new google.maps.LatLng(46.313050, 7.839088),

                                    draggable: false,

                                    flat: false,

                                    anchor: RichMarkerPosition.MIDDLE,

                                    content: div1

                                });



                                marker1 = new RichMarker({

                                    map: map,

                                    position: new google.maps.LatLng(46.314747, 7.891349),

                                    draggable: false,

                                    flat: false,

                                    anchor: RichMarkerPosition.MIDDLE,

                                    content: div

                                });

                                marker2 = new RichMarker({

                                    map: map,

                                    position: new google.maps.LatLng(46.291553, 7.909561), //LatLng(46.820104, 9.699776),

                                    draggable: false,

                                    flat: false,

                                    anchor: RichMarkerPosition.MIDDLE,

                                    content: div2

                                });





                                marker3 = new RichMarker({

                                    map: map,

                                    position: new google.maps.LatLng(46.278223, 7.859706), //(47.136778, 7.246791),

                                    draggable: false,

                                    flat: false,

                                    anchor: RichMarkerPosition.MIDDLE,

                                    content: div3

                                });





                                map.controls[google.maps.ControlPosition.LEFT_BOTTOM].push(legend);

                                //-------------------------------------------------------------------------



		//	function load_marker(){ 

  

				

		//		}

                         infowindow = new google.maps.InfoWindow({});

                                showLoad();

                                geoXml = new geoXML3.parser({

                                    map: map,

                                    infoWindow: infowindow,

                                    singleInfoWindow: true,

                                    suppressInfoWindows: true,

                                    zoom: false, //myGeoXml3Zoom,



                                    markerOptions: {optimized: false},

                                    afterParse: useTheData,

                                    failedParse: geoxmlErrorHandler







                                });

                                google.maps.event.addListener(geoXml, 'parsed', function () {

				 	

                                    func1();



  					marker.setVisible(true);

  					marker1.setVisible(true);

  					marker2.setVisible(true);

  					marker3.setVisible(true);

 

                         //           load_marker();   

                                    hideLoad();



                                });

                                geoXml.parse(filename);

                                //google.maps.event.addListener(map,'click',function(){if()}







                                //google.maps.event.addListener(map, "bounds_changed", makeSidebar);



                                //google.maps.event.addListener(map, "center_changed", makeSidebar);



                                //google.maps.event.addListener(map, "zoom_changed", makeSidebar);



                                //google.maps.event.addListenerOnce(map, "idle", makeSidebar);



                                // Make the link the first time when the page opens











                                // Make the link again whenever the map changes



                                //google.maps.event.addListener(map, 'maptypeid_changed', makeLink);



                                //google.maps.event.addListener(map, 'center_changed', makeLink);



                                //google.maps.event.addListener(map, 'bounds_changed', makeLink);



                                //google.maps.event.addListener(map, 'zoom_changed', makeLink);











                                //  var iconBase = 'https://maps.google.com/mapfiles/kml/shapes/';



                                /* var icons = {

                                 

                                 parking: {

                                 

                                 name: 'Parking',

                                 

                                 icon: iconBase + 'parking_lot_maps.png'

                                 

                                 },

                                 

                                 library: {

                                 

                                 name: 'Library',

                                 

                                 icon: iconBase + 'library_maps.png'

                                 

                                 },

                                 

                                 info: {

                                 

                                 name: 'Info',

                                 

                                 icon: iconBase + 'info-i_maps.png'

                                 

                                 }

                                 

                                 };

                                 

                                 

                                 

                                 var legend = document.getElementById('legend');

                                 

                                 for (var key in icons) {

                                 

                                 var type = icons[key];

                                 

                                 var name = type.name;

                                 

                                 var icon = type.icon;

                                 

                                 var div = document.createElement('div');

                                 

                                 div.innerHTML = '<img src="' + icon + '"> ' + name;

                                 

                                 legend.appendChild(div);

                                 

                                 }*/







                                map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(legend);

                            }

                            ;

                            function kmlPgClick(pm) {



                                if (geoXml.docs[0].placemarks[pm].polygon.getMap()) {



                                    //  google.maps.event.trigger(geoXmlDoc.placemarks[pm].polygon,"click");



                                } else {



                                    geoXmlDoc.placemarks[pm].polygon.setMap(map);
                                    //  google.maps.event.trigger(geoXmlDoc.placemarks[pm].polygon,"click");



                                }



                            }



                            function kmlPlClick(pm) {



                                if (geoXml.docs[0].placemarks[pm].polyline.getMap()) {

                                    //google.maps.event.trigger(geoXmlDoc.placemarks[pm].polyline,"click");



                                } else {



                                    geoXmlDoc.placemarks[pm].polyline.setMap(map);

                                    // google.maps.event.trigger(geoXmlDoc.placemarks[pm].polyline,"click");



                                }



                            }



                            function kmlClick(pm) {



                                if (geoXml.docs[0].placemarks[pm].marker.getMap()) {



                                    //  google.maps.event.trigger(geoXml.docs[0].placemarks[pm].marker,"click");



                                } else {



                                    geoXmlDoc.placemarks[pm].marker.setMap(map);

                                    //   google.maps.event.trigger(geoXmlDoc.placemarks[pm].marker,"click");



                                }



                            }



                            function kmlShowPlacemark(pm) {







                                if (geoXmlDoc.placemarks[pm].polygon) {



                                    map.fitBounds(geoXmlDoc.placemarks[pm].polygon.bounds);

                                } else if (geoXmlDoc.placemarks[pm].polyline) {



                                    map.fitBounds(geoXmlDoc.placemarks[pm].polyline.bounds);

                                } else if (geoXmlDoc.placemarks[pm].marker) {



                                    map.setCenter(geoXmlDoc.placemarks[pm].marker.getPosition());

                                }







                                for (var i = 0; i < geoXmlDoc.placemarks.length; i++) {



                                    var placemark = geoXmlDoc.placemarks[i];

                                    if (i == pm) {







                                        if (placemark.polygon)

                                            placemark.polygon.setMap(map);

                                        if (placemark.polyline)

                                            placemark.polyline.setMap(map);

                                        if (placemark.marker)

                                            placemark.marker.setMap(map);

                                    } else {



                                        if (placemark.polygon)

                                            placemark.polygon.setMap(null);

                                        if (placemark.polyline)

                                            placemark.polyline.setMap(null);

                                        if (placemark.marker)

                                            placemark.marker.setMap(null);

                                    }



                                }



                            }



                            var highlightOptions = {fillColor: "#00B300", strokeColor: "#000000", fillOpacity: 0.9, strokeWidth: 10};

                            var highlightLineOptions = {strokeColor: "#00B300", strokeWidth: 10};

                            var highlightLineOptions_yellow = {strokeColor: "#FFFF00", strokeWidth: 10};

                            var highlightLineOptions_orange = {strokeColor: "#FFA500", strokeWidth: 10};

                            var highlightLineOptions_red = {strokeColor: "#FF0000", strokeWidth: 10};

                            //--------------- use this function for highlighting the lines in the KML file -----------------------



                            //.............................start of API for reading input data ............................................ 



                            var a_49 = 8000225;

                            var a_100 = 8000241;

                            var a_1 = 8000734;

                            var a_2 = 8000737;

                            var a_3 = 8000491;

                            var a_5 = 8000733;

                            var a_6 = 8000003;

                            var a_7 = 8000705;

                            var a_8 = 8000729;

                            var a_24 = 8000321;

                            var a_25 = 8000236;

                            var a_9 = 8000681; 



                            var a_10 = 8000482;

                            var a_11 = 8000026;

                            var a_12 = 8000574;

                            var a_52 = 8000326;

                            var a_13 = 8000683;

                            var a_14 = 8000741;

                            var a_50 = 8000234;

                            var Last_Time = [34];



                            var Nomral_Time = {

                                /*Nomral_Time ="  /*80007348000234 means index" values {  Normal value,sequence,objects,(color path (0--green, 1--yellow, 2--orange, 3--red))*  }*/

                                /* This array basically used for controlling the sequence in requesting the apis, First index is unit_a+unit_b then in values 

                                 [0-,1-,2-,3-,4-]  0)Normal value,1)sequence or order in which it should execute, 2)objects, 3) color line 4)time value   

                                 first is containing the normnal value define for that path,sequence,saving the last color pattern for the line   */

                                "80007348000234": [285, 0, 0, 0, 0],

                                "80002348000737": [285,32, 0, 0, 0],

                                "80007378000234": [250, 1, 0, 0, 0],

                                "80002348000734": [250,33,0, 0,  0],

                                "80004918000737": [70, 2, 0, 0,  0],

                                "80004918000681": [60, 3, 0, 0,  0],

                                "80007378000491": [70, 4, 0, 0,  0],

                                "80006818000491": [60, 5, 0, 0,  0],

                                "80006818000482": [85, 6, 0, 0,  0],

                                "80004828000026": [100, 7, 0, 0, 0],

                                "80004828000681": [87, 8, 0, 0,  0],

                                "80000268000482": [100, 9, 0, 0,  0],

                                "80003268000574": [145, 10, 0, 0, 0],

                                "80005748000326": [145, 11, 0, 0, 0],

                                "80004918000733": [42, 12, 0, 0,  0],

                                "80007338000003": [93, 13, 0, 0,  0],

                                "80007338000491": [42, 14, 0, 0,  0],

                                "80000038000733": [95, 15, 0, 0,  0],

                                "80000038000705": [218, 16, 0, 0, 0],

                                "80007058000003": [218, 17, 0, 0, 0],

                                "80007058000729": [250, 18, 0, 0, 0],

                                "80007298000705": [210, 19, 0, 0, 0],

                                "80007378000741": [98, 20, 0, 0,  0],

                                "80007418000737": [98, 21, 0, 0,  0],

                                "80007298000321": [41, 22, 0, 0,  0],

                                "80003218000729": [60, 23, 0, 0,  0],

                                "80002368000729": [200, 24, 0, 0, 0],

                                "80007298000236": [200, 25, 0, 0, 0],

                                "80002258000734": [197, 26, 0, 0, 0],

                                "80007348000225": [182, 27, 0, 0, 0],

                                "80002418000225": [720, 28, 0, 0, 0],

                                "80002258000241": [2040, 29, 0, 0,0],

                                "80006838000741": [120, 30, 0, 0, 0],

                                "80007418000683": [120, 31, 0, 0, 0],

										/* These two routs has been added*/



                                "80005748000683": [105, 34, 0, 0, 0],

                                "80006838000574": [105, 35, 0, 0, 0]

                            };



                            var travel_values = {

                                0:  [0, 0],

                                1:  [0, 0],

                                2:  [0, 0],

                                3:  [0, 0],

                                4:  [0, 0],

                                5:  [0, 0],

                                6:  [0, 0],

                                7:  [0, 0],

                                8:  [0, 0],

                                9:  [0, 0],

                                10: [0, 0],

                                11: [0, 0],

                                12: [0, 0],

                                13: [0, 0],

                                14: [0, 0],

                                15: [0, 0],

                                16: [0, 0],

                                17: [0, 0],

                                18: [0, 0],

                                19: [0, 0],

                                20: [0, 0],

                                21: [0, 0],

                                22: [0, 0],

                                23: [0, 0],

                                24: [0, 0],

                                25: [0, 0],

                                26: [0, 0],

                                27: [0, 0],

                                28: [0, 0],

                                29: [0, 0],

                                30: [0, 0],

                                31: [0, 0],

                                32: [0, 0],

                                33: [0, 0],



                                34: [0, 0],

                                35: [0, 0]



                            };



                            var unit1 = [];

                            var Last_Time = [];

                            var Normal_Values_Sequence = [];

                            var JsonArray = [];

                            var temp_value_0_32 = -1; //Initalize the value for the two rows

                            var temp_value_1_33 = -1;

                            var objs_arr = [];



                            div =  document.createElement('DIV');

                            div1 = document.createElement('DIV');

                            div2 = document.createElement('DIV');

                            div3 = document.createElement('DIV');





                            function func1() {

                                // alert("i am called");

                                JsonArray.length = 0;

                                unit1.length = 0;

                                Last_Time.length = 0;

                                objs_arr.length = 0;

                                Normal_Values_Sequence.length = 0;

                                delete(xmlValues);

                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_1 + "&location_b=" + a_50;

                                xmlValues(api); //Normal Time =278 0



                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_50 + "&location_b=" + a_2;

                                xmlValues(api); //Normal Time =278 0





                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_2 + "&location_b=" + a_50;

                                xmlValues(api); //Normal Time =290  1



                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_50 + "&location_b=" + a_1;

                                xmlValues(api); //Normal Time =290  1





                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_3 + "&location_b=" + a_2;

                                xmlValues(api); //Normal Time =83   2



                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_3 + "&location_b=" + a_9;

                                xmlValues(api); //Normal Time =73  3



                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_2 + "&location_b=" + a_3;

                                xmlValues(api); //Normal Time =76   4



                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_9 + "&location_b=" + a_3;

                                xmlValues(api); //Normal Time =110  5



                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_9 + "&location_b=" + a_10;

                                xmlValues(api); //Normal Time =85  6



                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_10 + "&location_b=" + a_11;

                                xmlValues(api); //Normal Time =105 7



                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_10 + "&location_b=" + a_9;

                                xmlValues(api); //Normal Time =87  8



                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_11 + "&location_b=" + a_10;

                                xmlValues(api); //Normal Time =101  9



                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_52 + "&location_b=" + a_12;

                                xmlValues(api); //Normal Time =135  10



                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_12 + "&location_b=" + a_52;

                                xmlValues(api); //Normal Time =135  11



                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_3 + "&location_b=" + a_5;

                                xmlValues(api); //Normal Time =33   12



                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_5 + "&location_b=" + a_6;

                                xmlValues(api); //Normal Time =93   13



                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_5 + "&location_b=" + a_3;

                                xmlValues(api); //Normal Time =39   14



                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_6 + "&location_b=" + a_5;

                                xmlValues(api); //Normal Time =95   15 





                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_6 + "&location_b=" + a_7;

                                xmlValues(api); //Normal Time =218  16



                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_7 + "&location_b=" + a_6;

                                xmlValues(api); //Normal Time =218  17



                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_7 + "&location_b=" + a_8;

                                xmlValues(api); //Normal Time =338  18 



                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_8 + "&location_b=" + a_7;

                                xmlValues(api); //Normal Time =349  19



                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_2 + "&location_b=" + a_14;

                                xmlValues(api); //Normal Time =98   20



                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_14 + "&location_b=" + a_2;

                                xmlValues(api); //Normal Time =103  21



                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_8 + "&location_b=" + a_24;

                                xmlValues(api); //Normal Time =41   22



                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_24 + "&location_b=" + a_8;

                                xmlValues(api); //Normal Time =64   23



                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_25 + "&location_b=" + a_8;

                                xmlValues(api); //Normal Time =261  24



                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_8 + "&location_b=" + a_25;

                                xmlValues(api); //Normal Time =237  25              



                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_49 + "&location_b=" + a_1;

                                xmlValues(api); //Normal Time =226  26 



                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_1 + "&location_b=" + a_49;

                                xmlValues(api); //Normal Time =182  27



                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_100 + "&location_b=" + a_49;

                                xmlValues(api); //Normal Time =695  28



                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_49 + "&location_b=" + a_100;

                                xmlValues(api); //Normal Time =750  29



                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_13 + "&location_b=" + a_14;

                                xmlValues(api); //Normal Time =120  30



                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_14 + "&location_b=" + a_13;

                                xmlValues(api); //Normal Time =120  31





                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_12 + "&location_b=" + a_13;

                                xmlValues(api); //Normal Time =120  34



                                var api = "http://bb8.bluetrace.eu/hotspots/traveltime?api_key=90d2d2259f2aa2b7fd556c60a1dcd7&location_a=" + a_13 + "&location_b=" + a_12;

                                xmlValues(api); //Normal Time =120  35





                                //  document.write("    <br> "); document.write("    <br> ");



                                function xmlValues(api) {



                                    var encodedUrl = encodeURIComponent(api);

                                    var proxy = 'http://mobility.center/vispertaltunnel2/VISPERTALTUNNEL4/libararies/proxy.php';

                                    $.ajax({

                                        url: proxy + "?url=" + encodedUrl,

                                        type: 'GET',

                                        cache: false,

                                        async: true,

                                        dataType: "JSON",

                                        success: function (data) {

                                            JsonArray.push(data);

                                            if (JsonArray.length === 36) {



                                                fun();

                                            }



                                        }





                                    });

                                }



                                function fun() {





                                    for (var i = 0; i < 36; i++) {



                                        $.each(JsonArray[i], function (index, element) {



                                            //   console.log(JsonArray[i] + "      " + index + "     " + element);

                                            var xml = $.parseXML(element);

                                            $(xml).each(function () {



                                                //   var Date_Time = $(xml).find("DateData").text();



                                                var LocationA = $(xml).find("LocationA").text();

                                                var LocationB = $(xml).find("LocationB").text();

                                                var TravelTime = $(xml).find("TravelTime").text();

                                                var obj = $(xml).find("Matches").text();
							
   						  obj=4;
						  TravelTime =3000;

                                             //   TravelTime = Math.floor((Math.random() * 5000));

                                              //  obj = Math.floor((Math.random() * 14));



                                                unit1.push(TravelTime);

                                                objs_arr.push(obj); //depreicated form the actul code



                                                Normal_Values_Sequence.push(LocationA + "" + LocationB);





                                                var sequence = Nomral_Time[Normal_Values_Sequence[i]][1];

						

		

                                                travel_values[sequence][0] = TravelTime;



                                                var normal_value = Nomral_Time[Normal_Values_Sequence[i]][0];



                                                travel_values[sequence][1] = normal_value;



                                                console.log(travel_values[sequence][0] + " travel time values from the array" + " Normal value " + travel_values[sequence][1]);



                                                console.log(LocationA + "      " + LocationB + "  objects    " + obj + "  travel time   " + TravelTime + "   Normal value  " + Nomral_Time[Normal_Values_Sequence[i]][0] + "   sequence   " + Nomral_Time[Normal_Values_Sequence[i]][1]);

                                                Nomral_Time[Normal_Values_Sequence[i]][2] = parseInt(obj);    // [i][2] means Third value which is actully consist of no of objects 

                                                console.log(LocationA + "      " + LocationB + "  objects    " + obj);



                                            });

                                        });

                                    }



                                    function myFunction(minut) {
                            
                                 console.log("minuts  " + minut);  

                                        if (minut < 5) {

                                            minut = '&lt;' + 5;

 							

                                        } else if (minut < 10) {

                                            minut = '&lt;' + 10;

				

                                        } else if (minut < 15) {

                                            minut = '&lt;' + 15;

                                        } else {

                                            minut = '&ge;' + 15;

                                        }

                                        return minut;

                                    }





                 function check_neg(seconds) {

					if(seconds < 0 )

						{

						return 0;

						}

					else{

				

					   return seconds;	

					    }  





					   }



                                    var agg_value1 = null;

                                    normal_value1 = null;

                                    var agg_value2 = null;

                                    var normal_value2 = null;

                                    var agg_value3 = null;

                                    var normal_value3 = null;

                                    var agg_value4 = null;

                                    var normal_value4 = null;

                                    var agg_value5 = null;

                                    var normal_value5 = null;

                                    var agg_value6 = null;

                                    var normal_value6 = null;

                                    var agg_value7 = null;

                                    var normal_value7 = null;

                                    var agg_value8 = null;

                                    var normal_value8 = null;







				    

                                    agg_value1 = check_neg(parseInt(travel_values[27][0])) + check_neg(parseInt(travel_values[1][0])) + check_neg(parseInt(travel_values[2][0])) + check_neg(parseInt(travel_values[33][0]));
				   
				

                                    normal_value1 = parseInt(travel_values[27][1]) + parseInt(travel_values[1][1]) + parseInt(travel_values[2][1]);					//because the 31 and 0 contain the duplicated normal values

                                    agg_value2 = check_neg(parseInt(travel_values[4][0])) + check_neg(parseInt(travel_values[0][0])) + check_neg(parseInt(travel_values[26][0])) + check_neg(parseInt(travel_values[32][0]));

                                    normal_value2 = parseInt(travel_values[4][1]) + parseInt(travel_values[0][1]) + parseInt(travel_values[26][1]);

                                    agg_value3 = check_neg(parseInt(travel_values[21][0])) + check_neg(parseInt(travel_values[30][0])) + check_neg(parseInt(travel_values[10][0])) + check_neg(parseInt(travel_values[34][0]));

                                    normal_value3 = parseInt(travel_values[21][1]) + parseInt(travel_values[30][1]) + parseInt(travel_values[10][1]);



                                    agg_value4 = check_neg(parseInt(travel_values[20][0])) + check_neg(parseInt(travel_values[31][0])) + check_neg(parseInt(travel_values[11][0]))+ check_neg(parseInt(travel_values[35][0]));

                                    normal_value4 = parseInt(travel_values[20][1]) + parseInt(travel_values[31][1]) + parseInt(travel_values[11][1]);






                                    agg_value5 = check_neg(parseInt(travel_values[5][0])) + check_neg(parseInt(travel_values[8][0])) + check_neg(parseInt(travel_values[9][0]));

                                    normal_value5 = parseInt(travel_values[5][1]) + parseInt(travel_values[8][1]) + parseInt(travel_values[9][1]);



                                    agg_value6 = check_neg(parseInt(travel_values[3][0])) + check_neg(parseInt(travel_values[6][0])) + check_neg(parseInt(travel_values[7][0]));

                                    normal_value6 = parseInt(travel_values[3][1]) + parseInt(travel_values[6][1]) + parseInt(travel_values[7][1]);





                                    agg_value7 = check_neg(parseInt(travel_values[18][0])) + check_neg(parseInt(travel_values[16][0])) + check_neg(parseInt(travel_values[13][0])) + check_neg(parseInt(travel_values[12][0]));

                                    normal_value7 = parseInt(travel_values[18][1]) + parseInt(travel_values[16][1]) + parseInt(travel_values[13][1]) + parseInt(travel_values[12][1]);



                                    agg_value8 = check_neg(parseInt(travel_values[19][0])) + check_neg(parseInt(travel_values[17][0])) + check_neg(parseInt(travel_values[15][0])) + check_neg(parseInt(travel_values[14][0]));

                                    normal_value8 = parseInt(travel_values[19][1]) + parseInt(travel_values[17][1]) + parseInt(travel_values[15][1]) + parseInt(travel_values[14][1]);


				
  			 	     console.log("agg_value1-normal_value1   "+ agg_value1  + "   " + normal_value1+  "   equal to " + (agg_value1-normal_value1) );
				     console.log("agg_value2-normal_value2   "+ agg_value2  + "   " + normal_value2+  "   equal to " + (agg_value2-normal_value2) );				
			 	     console.log("agg_value3- normal_value3 " + agg_value3  + "   " + normal_value3+  "   equal to " + (agg_value3-normal_value3) );
				     console.log("agg_value4-normal_value4   "+ agg_value4  + "   " + normal_value4 +  "  equal to " + (agg_value4-normal_value4) );
  			 	     console.log("agg_value5-normal_value5   "+ agg_value5  + "   " + normal_value5+  "   equal to " + (agg_value5-normal_value5) );
				     console.log("agg_value6-normal_value6   "+ agg_value6  + "   " + normal_value6+  "   equal to " + (agg_value6-normal_value6) );				
			 	     console.log("agg_value7- normal_value7  "+ agg_value7  + "   " + normal_value7+  "   equal to " + (agg_value7-normal_value7) );
				     console.log("agg_value8-normal_value8   "+ agg_value8  + "   " + normal_value8+  "   equal to " + (agg_value8-normal_value8) );








                                    div1.innerHTML = '<div class="my-other-marker">' + 'Gampel/Steg-Visp<br>' + myFunction(Math.round((agg_value1 - normal_value1) / 60)) + ' min &#x25c4; </br> ' + myFunction(Math.round((agg_value2 - normal_value2) / 60)) + ' min &#x25ba;</div>';

                                    div.innerHTML = '<div class="my-other-marker">' + 'Entlastungsstrasse<br>' + myFunction(Math.round((agg_value3 - normal_value3) / 60)) + ' min &#x25c4; </br> ' + myFunction(Math.round((agg_value4 - normal_value4) / 60)) + ' min &#x25ba;</div>';



                                    div2.innerHTML = '<div class="my-other-marker">' + 'Eyholz-Visp<br>' + myFunction(Math.round((agg_value5 - normal_value5) / 60)) + ' min &#x25c4; </br> ' + myFunction(Math.round((agg_value6 - normal_value6) / 60)) + ' min &#x25ba;</div>';

                                    div3.innerHTML = '<div class="my-other-marker">' + 'Stalden-Visp<br>' + myFunction(Math.round((agg_value7 - normal_value7) / 60)) + ' min &#x25b2; </br> ' + myFunction(Math.round((agg_value8 - normal_value8) / 60)) + ' min &#x25bc;</div>';









                                    if (!geoXmlDoc || !geoXmlDoc.placemarks)

                                        return;

                                    // 	   alert(geoXmlDoc.placemarks.length);



                                    for (var i = 0; i < (geoXmlDoc.placemarks.length); i++) {

					





                                        if (Normal_Values_Sequence[i]){

				

					//////////////////



  					function changeLineColor() {

					 if ((Nomral_Time[Normal_Values_Sequence[i]][1]==34)||(Nomral_Time[Normal_Values_Sequence[i]][1]==35))

						{

	

						return;

						}

					

                                                if (Nomral_Time[Normal_Values_Sequence[i]][3] === 0)

                                                    if (placemark.polyline)

                                                        placemark.polyline.setOptions(highlightLineOptions);

                                                if (Nomral_Time[Normal_Values_Sequence[i]][3] === 1)

                                                    if (placemark.polyline)

                                                        placemark.polyline.setOptions(highlightLineOptions_yellow);

                                                if (Nomral_Time[Normal_Values_Sequence[i]][3] === 2)

                                                    if (placemark.polyline)

                                                        placemark.polyline.setOptions(highlightLineOptions_orange);

                                                if (Nomral_Time[Normal_Values_Sequence[i]][3] === 3)

                                                    if (placemark.polyline)

                                                        placemark.polyline.setOptions(highlightLineOptions_red);

                                            }



                                            /* This function update the lines value in the array value, so this value will look by map line to 

                                             * update its value*/









                                            function  lineColorTravelTimeUpdateValue()

                                            {

                                                if (Nomral_Time[Normal_Values_Sequence[i]][1] === 28)

                                                {



                                                    Nomral_Time[Normal_Values_Sequence[i]][3] = parseInt("0");     //assign zero means that green line on this specific line

                                                }

                                                else if (Nomral_Time[Normal_Values_Sequence[i]][1] === 29)

                                                {



                                                    if ((Last_Time[i] < 900)) {



                                                        //      console.log("else color is green= " + Last_Time[i] + "<br>");

                                                        Nomral_Time[Normal_Values_Sequence[i]][3] = parseInt("0");   //Assign the code value 0 means green color on 4th location in arrayon 3rd location in array



                                                    }



                                                    else if (Last_Time[i] < 1800) {



                                                        //    console.log("else color is yellow=  " + Last_Time[i] + "<br>");

                                                        Nomral_Time[Normal_Values_Sequence[i]][3] = parseInt("1"); //Assign the code value 1 means yellow color



                                                    }



                                                    else if (Last_Time[i] < 3600) {

                                                        //                                           alert ("orange");



                                                        //    console.log("else color is Orange=  " + Last_Time[i] + "<br>");

                                                        Nomral_Time[Normal_Values_Sequence[i]][3] = parseInt("2");//Assign the code value 2 means orange color



                                                    }



                                                    else if (Last_Time[i] > 3599) {

                                                        //               alert ("red");



                                                        Nomral_Time[Normal_Values_Sequence[i]][3] = parseInt("3");//Assign the code value 3 means red color

                                                        //        console.log("else color is red=  " + Last_Time[i] + "<br>");

                                                    }



                                                }

                                                else

                                                {

                                                    //          alert("else value ="+ Last_Time[i]);

                                                    if ((Last_Time[i] < 299)) {



                                                        //    console.log("color is green= " + Last_Time[i] + "<br>");

                                                        Nomral_Time[Normal_Values_Sequence[i]][3] = parseInt("0");//Assign the code value 0 means green color



                                                    }



                                                    else if (Last_Time[i] < 600) {



                                                        //   console.log("color is yellow=  " + Last_Time[i] + "<br>");

                                                        Nomral_Time[Normal_Values_Sequence[i]][3] = parseInt("1");//Assign the code value 1 means yellow color

                                                    }



                                                    else if (Last_Time[i] < 900) {

                                                        //    console.log("color is Orange=  " + Last_Time[i] + "<br>");



                                                        Nomral_Time[Normal_Values_Sequence[i]][3] = parseInt("2");//Assign the code value 2 means orange color

                                                    }

                                                    else if (Last_Time[i] > 899) {



                                                        Nomral_Time[Normal_Values_Sequence[i]][3] = parseInt("3");//Assign the code value 3 means red color



                                                        //     console.log("color is red=  " + Last_Time[i] + "<br>");

                                                    }

                                                }



                                            }  //end of the funcLineColor function



						////////////////









                                            if (((Nomral_Time[Normal_Values_Sequence[i]][1] === 0) && (temp_value_0_32 === -1)) || ((Nomral_Time[Normal_Values_Sequence[i]][1] === 32) && (temp_value_0_32 === -1)))

                                            {

                                                temp_value_0_32 = parseInt(unit1[i]);

                                                //      alert(Nomral_Time[Normal_Values_Sequence[i]][1] + " temp_value_0_32 " + temp_value_0_32 + "  first value");



                                            }

                                            else if (((Nomral_Time[Normal_Values_Sequence[i]][1] === 0) && (temp_value_0_32 !== -1)) || ((Nomral_Time[Normal_Values_Sequence[i]][1] === 32) && (temp_value_0_32 !== -1)))

                                                    //   (((Normal_Values_Sequence[i] === 0) || (Normal_Values_Sequence[i] === 32)) && (temp_value_0_32 !== 0)) 

                                                    {

                                                        temp_value_0_32 = temp_value_0_32 + parseInt(unit1[i]);

                                                        //       alert(Nomral_Time[Normal_Values_Sequence[i]][1] + " travel value " + temp_value_0_32 + "  second--32-- first value");

                                                        unit1[i] = temp_value_0_32;

                                                        temp_value_0_32 = -1;

                                                        Nomral_Time[Normal_Values_Sequence[i]][1] = 0;

                                                    }





                                            else if (((Nomral_Time[Normal_Values_Sequence[i]][1] === 1) && (temp_value_1_33 === -1)) || ((Nomral_Time[Normal_Values_Sequence[i]][1] === 33) && (temp_value_1_33 === -1)))

                                                    //(((Normal_Values_Sequence[i] === 1) || (Normal_Values_Sequence[i] === 33)) && (temp_value_1_33 === 0)) 

                                                    {

                                                        temp_value_1_33 = parseInt(unit1[i]);

                                                        //         alert(Nomral_Time[Normal_Values_Sequence[i]][1] + " travel value " + temp_value_1_33 + "  first value --33--");

                                                    }

                                            else if (((Nomral_Time[Normal_Values_Sequence[i]][1] === 1) && (temp_value_1_33 !== -1)) || ((Nomral_Time[Normal_Values_Sequence[i]][1] === 33) && (temp_value_1_33 !== -1)))

                                                    //(((Normal_Values_Sequence[i] === 1) || (Normal_Values_Sequence[i] === 33)) && (temp_value_1_33 !== 0)) 

                                                    {

                                                        temp_value_1_33 = temp_value_1_33 + parseInt(unit1[i]);

                                                        // alert(Nomral_Time[Normal_Values_Sequence[i]][1] + " travel value " + temp_value_1_33 + "  second-33-- first value");

                                                        unit1[i] = temp_value_1_33;

                                                        temp_value_1_33 = -1;

                                                        Nomral_Time[Normal_Values_Sequence[i]][1] = 1;

                                                    }



                                            if (((Nomral_Time[Normal_Values_Sequence[i]][1] !== 32) && (Nomral_Time[Normal_Values_Sequence[i]][1] !== 33) && (Nomral_Time[Normal_Values_Sequence[i]][1] !== 0) && (Nomral_Time[Normal_Values_Sequence[i]][1] !== 1)) || ((Nomral_Time[Normal_Values_Sequence[i]][1] === 0) && (temp_value_0_32 === -1)) || ((Nomral_Time[Normal_Values_Sequence[i]][1] === 1) && (temp_value_1_33 === -1)))

                                            {

                                                     						



                                                var placemark = geoXmlDoc.placemarks[Nomral_Time[Normal_Values_Sequence[i]][1]];

                                                Last_Time[i] = unit1[i] - Nomral_Time[Normal_Values_Sequence[i]][0];

                                                /* 

						 	console.log(" last value" + Last_Time[i]);

                                                 	console.log("     Normal value" + Nomral_Time[Normal_Values_Sequence[i]][0]);

                                                 	console.log("Travel time value" + unit1[i] + "<br>");                                      

	                                                This Nomral_Time[Normal_Values_Sequence[i]][2] represent the number of objects */



					 	

                                                if (objs_arr[i] > 7) {

                                                    //  alert("6 or more objects="+objs_arr[i]);

                                                    lineColorTravelTimeUpdateValue();

                                                    changeLineColor();

                                                    Nomral_Time[Normal_Values_Sequence[i]][2] = objs_arr[i];   //Nomral_Time[Normal_Values_Sequence[i]][2] means assign find objects on 3rd location in array

                                                    Nomral_Time[Normal_Values_Sequence[i]][4] = 0;



                                                }

                                                else if (objs_arr[i] >= 3)

                                                {
					
							


                                                    var colorValue = Nomral_Time[Normal_Values_Sequence[i]][3];  //assign its old color value for checking its neibhour value
						
  						    lineColorTravelTimeUpdateValue();    //update the and get back the current line. it suppose to be check with its neighbour value 

                                                    var result = colorValue - Nomral_Time[Normal_Values_Sequence[i]][3];

						 console.log(result);					
                                                    if (result < 0) {



                                                        Nomral_Time[Normal_Values_Sequence[i]][3] = (parseInt(colorValue) + 1); //change to higher value

                                                    }

                                                    else if (result > 0) {



                                                        Nomral_Time[Normal_Values_Sequence[i]][3] = (parseInt(colorValue)- 1); //sequecially change the line to lower value

                                                    }
						 	
				                  console.log(Nomral_Time[Normal_Values_Sequence[i]][3]);
							

                                                    /*Nomral_Time[Normal_Values_Sequence[i]][3]  represents the lines values assigned */

                                                    Nomral_Time[Normal_Values_Sequence[i]][4] = 0; // keep the timer zero as the value is changed

                                                    changeLineColor();   //update the colors of the lines

                                                }

                                                else

                                                {

                                                    Nomral_Time[Normal_Values_Sequence[i]][4] = parseInt(Nomral_Time[Normal_Values_Sequence[i]][4]) + 1;

                                                    changeLineColor();



                                                    if (Nomral_Time[Normal_Values_Sequence[i]][4] >= 30)  // if the value is remain for the same half hour then make it green...

                                                    {

                                                        Nomral_Time[Normal_Values_Sequence[i]][3] = 0;

                                                        Nomral_Time[Normal_Values_Sequence[i]][4] = 0;

                                                        changeLineColor();

                                                    }

                                                }



                                                //     console.log("Unit =" + unit1[i] + " Normal_Time = " + Nomral_Time[i] + "Last_Time =  " + Last_Time[i]);



                                                console.log("Last_Time =" + Last_Time[i] + "  Normal Value  = " + Nomral_Time[Normal_Values_Sequence[i]][0] + "  sequence  = " + Nomral_Time[Normal_Values_Sequence[i]][1] + "  colors = " + Nomral_Time[Normal_Values_Sequence[i]][3] + "   objects = " + Nomral_Time[Normal_Values_Sequence[i]][2] + "  time to remain the same path = " + Nomral_Time[Normal_Values_Sequence[i]][4]);

                                            }



                                            /* ------- This function update the lines of the map ----- */



                                          



                                        }

                                    }

                                }



                                //------------- end of for loop-------------



                                setTimeout(func1, 20000);

                            }



                            //setTimeout(func1, 1000);

                            function myStopFunction() {



                                //clearInterval(myVar);



                            }



                            function kmlHighlightPoly(pm) {







                                for (var i = 0; i < geoXmlDoc.placemarks.length; i++) {



                                    var placemark = geoXmlDoc.placemarks[i];

                                    // alert(i);         	 







                                    if (i == pm) {



                                        if (placemark.polygon)

                                            placemark.polygon.setOptions(highlightOptions);

                                        if (placemark.polyline)

                                            placemark.polyline.setOptions(highlightLineOptions);

                                    } else {



                                        if (placemark.polygon)

                                            placemark.polygon.setOptions(placemark.polygon.normalStyle);

                                        if (placemark.polyline)

                                            placemark.polyline.setOptions(placemark.polyline.normalStyle);

                                    }



                                }



                            }



                            function kmlUnHighlightPoly(pm) {



                                for (var i = 0; i < geoXmlDoc.placemarks.length; i++) {



                                    if (i == pm) {



                                        var placemark = geoXmlDoc.placemarks[i];

                                        if (placemark.polygon)

                                            placemark.polygon.setOptions(placemark.polygon.normalStyle);

                                        if (placemark.polyline)

                                            placemark.polyline.setOptions(placemark.polyline.normalStyle);

                                    }



                                }



                            }




                            function showAll() {



                                map.fitBounds(geoXmlDoc.bounds);

                                for (var i = 0; i < geoXmlDoc.placemarks.length; i++) {



                                    var placemark = geoXmlDoc.placemarks[i];

                                    if (placemark.polygon)

                                        placemark.polygon.setMap(map);

                                    if (placemark.polyline)

                                        placemark.polyline.setMap(map);

                                    if (placemark.marker)

                                        placemark.marker.setMap(map);

                                }



                            }



                            //----------------------------- Real Time HighLight value ---------------------







                            function highlightPolyRealTime(poly, polynum) {



                                var rowElem = document.getElementById('row' + polynum);

                                if (rowElem)

                                    rowElem.style.backgroundColor = "#FFFA5E";

                                poly.setOptions(highlightLineOptions);

                            }



                            //----------------------- End of the HighLightRealTime  function----------------







                            function highlightPoly(poly, polynum) {



                                /*	

                                 

                                 //    poly.setOptions({fillColor: "#0000FF", strokeColor: "#0000FF", fillOpacity: 0.3}) ;

                                 

                                 google.maps.event.addListener(poly,"mouseover",function() {

                                 

                                 var rowElem = document.getElementById('row'+polynum);

                                 

                                 

                                 

                                 if (rowElem) rowElem.style.backgroundColor = "#FFFA5E";

                                 

                                 if (geoXmlDoc.placemarks[polynum].polygon) {

                                 

                                 poly.setOptions(highlightOptions);

                                 

                                 } else if (geoXmlDoc.placemarks[polynum].polyline) {

                                 

                                 poly.setOptions(highlightLineOptions);

                                 

                                 

                                 

                                 }

                                 

                                 });

                                 

                                 google.maps.event.addListener(poly,"mouseout",function() {

                                 

                                 var rowElem = document.getElementById('row'+polynum);

                                 

                                 if (rowElem) rowElem.style.backgroundColor = "#FFFFFF";

                                 

                                 poly.setOptions(poly.normalStyle);

                                 

                                 });*/



                            }




                            // == rebuilds the sidebar to match the markers currently displayed ==



                            function makeSidebarPolygonEntry(i) {



                                var name = geoXmlDoc.placemarks[i].name;

                                if (!name || (name.length == 0))

                                    name = "polygon #" + i;

                                sidebarHtml += '<tr id="row' + i + '"><td onmouseover="kmlHighlightPoly(' + i + ');" onmouseout="kmlUnHighlightPoly(' + i + ');"><a href="javascript:kmlPgClick(' + i + ');">' + name + '</a> - <a href="javascript:kmlShowPlacemark(' + i + ');">show</a></td></tr>';

                            }



                            function makeSidebarPolylineEntry(i) {



                                var name = geoXmlDoc.placemarks[i].name;

                                if (!name || (name.length == 0))

                                    name = "polyline #" + i;

                                // alert(name);



                                sidebarHtml += '<tr id="row' + i + '"><td onmouseover="kmlHighlightPoly(' + i + ');" onmouseout="kmlUnHighlightPoly(' + i + ');"><a href="javascript:kmlPlClick(' + i + ');">' + name + '</a> - <a href="javascript:kmlShowPlacemark(' + i + ');">show</a></td></tr>';

                            }



                            function makeSidebarEntry(i) {



                                var name = geoXmlDoc.placemarks[i].name;

                                if (!name || (name.length == 0))

                                    name = "marker #" + i;

                                // alert(name);



                                sidebarHtml += '<tr id="row' + i + '"><td><a href="javascript:kmlClick(' + i + ');">' + name + '</a></td></tr>';

                            }







                            function makeSidebar() {



                                sidebarHtml = '<table><tr><td><a href="javascript:showAll();">Show All</a></td></tr>';

                                var currentBounds = map.getBounds();

                                // if bounds not yet available, just use the empty bounds object;



                                if (!currentBounds)

                                    currentBounds = new google.maps.LatLngBounds();

                                if (geoXmlDoc && geoXmlDoc.placemarks) {



                                    for (var i = 0; i < geoXmlDoc.placemarks.length; i++) {



                                        if (geoXmlDoc.placemarks[i].polygon) {



                                            if (currentBounds.intersects(geoXmlDoc.placemarks[i].polygon.bounds)) {



                                                makeSidebarPolygonEntry(i);

                                            }



                                        }



                                        if (geoXmlDoc.placemarks[i].polyline) {



                                            if (currentBounds.intersects(geoXmlDoc.placemarks[i].polyline.bounds)) {



                                                makeSidebarPolylineEntry(i);

                                            }



                                        }



                                        if (geoXmlDoc.placemarks[i].marker) {



                                            if (currentBounds.contains(geoXmlDoc.placemarks[i].marker.getPosition())) {



                                                makeSidebarEntry(i);

                                            }



                                        }



                                    }



                                }



                                sidebarHtml += "</table>";

                                document.getElementById("sidebar").innerHTML = sidebarHtml;

                            }



                            sidebarHtml1 = '<table><tr><td><p>Line Description</p></td></tr><tr><td><p>Line Description</p></td></tr><tr><td><p>Line Description</p></td></tr><tr><td><p>Line Description</p></td></tr> </table>';

                            function geoxmlErrorHandler(doc) {



                                showParseError();

                                alert("GEOXML3: failed parse");

                            }







                            function useTheData(doc) {



                                var currentBounds = map.getBounds();

                                if (!currentBounds)

                                    currentBounds = new google.maps.LatLngBounds();

                                // Geodata handling goes here, using JSON properties of the doc object



                                sidebarHtml = '<table><tr><td><a href="javascript:showAll();">Show All</a></td></tr>';

                                //  var sidebarHtml = '<table>';



                                geoXmlDoc = doc[0];

                                if (!geoXmlDoc || !geoXmlDoc.placemarks)

                                    return;

                                for (var i = 0; i < geoXmlDoc.placemarks.length; i++) {



                                    // console.log(doc[0].markers[i].title);











                                    var placemark = geoXmlDoc.placemarks[i];

                                    if (placemark.polygon) {



                                        if (currentBounds.intersects(placemark.polygon.bounds)) {



                                            makeSidebarPolygonEntry(i);

                                        }



                                        var normalStyle = {

                                            strokeColor: placemark.polygon.get('strokeColor'),

                                            strokeWeight: placemark.polygon.get('strokeWeight'),

                                            strokeOpacity: placemark.polygon.get('strokeOpacity'),

                                            fillColor: placemark.polygon.get('fillColor'),

                                            fillOpacity: placemark.polygon.get('fillOpacity')



                                        };

                                        placemark.polygon.normalStyle = normalStyle;

                                        highlightPoly(placemark.polygon, i);

                                    }







                                    if (placemark.polyline) {



                                        if (currentBounds.intersects(placemark.polyline.bounds)) {



                                            makeSidebarPolylineEntry(i);

                                        }



                                        var normalStyle = {

                                            strokeColor: placemark.polyline.get('strokeColor'),

                                            strokeWeight: placemark.polyline.get('strokeWeight'),

                                            strokeOpacity: placemark.polyline.get('strokeOpacity')



                                        };

                                        placemark.polyline.normalStyle = normalStyle;

                                        highlightPoly(placemark.polyline, i);

                                    }



                                    if (placemark.marker) {



                                        if (currentBounds.contains(placemark.marker.getPosition())) {



                                            makeSidebarEntry(i);

                                        }



                                    }







                                    /*    doc[0].markers[i].setVisible(false); */



                                }



                                sidebarHtml += "</table>";

                                document.getElementById("sidebar").innerHTML = sidebarHtml;

                            }

                            ;

                            function hide_kml() {







                                geoXml.hideDocument();

                            }







                            function unhide_kml() {







                                geoXml.showDocument();

                            }



                            function reload_kml() {



                                geoXml.hideDocument();

                                delete geoXml;

                                geoXml = new geoXML3.parser({

                                    map: map,

                                    singleInfoWindow: true,

                                    afterParse: useTheData



                                });

                                geoXml.parse(filename);

                            }



                            /*

                             

                             function hide_markers_kml(){

                             

                             for (var i=0;i<geoXmlDoc.markers.length;i++) {

                             

                             geoXmlDoc.markers[i].setVisible(false);

                             

                             }

                             

                             }

                             

                             

                             

                             function unhide_markers_kml(){

                             

                             for (var i=0;i<geoXmlDoc.markers.length;i++) {

                             

                             geoXmlDoc.markers[i].setVisible(true);

                             

                             }

                             

                             }

                             

                             function hide_polys_kml(){

                             

                             for (var i=0;i<geoXmlDoc.gpolylines.length;i++) {

                             

                             geoXmlDoc.gpolylines[i].setMap(null);

                             

                             

                             

                             }

                             

                             }

                             

                             

                             

                             function unhide_polys_kml(){

                             

                             for (var i=0;i<geoXmlDoc.gpolylines.length;i++) {

                             

                             geoXmlDoc.gpolylines[i].setMap(map);

                             

                             }

                             }

                             

                             

                             function load_kmlLayer() {

                             

                             kmlLayer = new google.maps.KmlLayer(filename,{preserveViewport:!myGeoXml3Zoom});

                             

                             google.maps.event.addListener(kmlLayer, "status_changed", function() {

                             

                             document.getElementById('kmlstatus').innerHTML = "Kml Status:"+kmlLayer.getStatus();

                             

                             

                             

                             });

                             

                             kmlLayer.setMap(map);

                             

                             }

                             

                             function hide_kmlLayer() {

                             

                             kmlLayer.setMap(null);

                             

                             }

                             

                             function show_kmlLayer() {

                             

                             kmlLayer.setMap(map);

                             

                             

                             

                             }  */







                            // A function to hide the loading message



                            function hideLoad()



                            {



                                var loaddiv = document.getElementById("loaddiv");

                                if (loaddiv == null)



                                {



                                    alert("Sorry can't find the loaddiv");

                                    return;

                                }



                                //div found



                                loaddiv.style.visibility = "hidden";

                                $(function () {



                                    $('#legend').removeClass('hidden');

                                });

                            }







                            // A function to hide the loading message



                            function showLoad()



                            {



                                var loaddiv = document.getElementById("loaddiv");

                                if (loaddiv == null)



                                {



                                    alert("Sorry can't find your loaddiv");

                                    return;

                                }



                                //div found



                                loaddiv.style.visibility = "visible";

                                legend.style.visibility = "hidden";

                            }



                            function showParseError()



                            {



                                var loaddiv = document.getElementById("loaddiv");

                                if (loaddiv == null)



                                {



                                    alert("Sorry can't find your loaddiv");

                                    return;

                                }



                                //div found



                                loaddiv.style.visibility = "visible";

                                loaddiv.innerHTML = "<b>XML parse error</b>";

                            }







                            function codeAddress() {



                                var address = document.getElementById('address').value;

                                geocoder.geocode({'address': address}, function (results, status) {



                                    if (status == google.maps.GeocoderStatus.OK) {



                                        var marker = new google.maps.Marker({

                                            map: map,

                                            position: results[0].geometry.location



                                        });

                                        if (results[0].geometry.viewport)

                                            map.fitBounds(results[0].geometry.viewport);

                                        else if (results[0].geometry.bounds)

                                            map.fitBounds(results[0].geometry.bounds);

                                        else

                                            map.setCenter(results[0].geometry.location);

                                    } else {



                                        alert('Geocode was not successful for the following reason: ' + status);

                                    }



                                });

                            }



                                        </script>



                                    </head>







                                    <body onload="initialize();">



                                        <!--  <h4>Reading a <a href="http://code.google.com/intl/it-IT/apis/kml/documentation/">KML</a> file with Google Maps JavaScript API <a href="http://code.google.com/intl/it-IT/apis/maps/documentation/v3/">Version 3</a> and <a href="http://code.google.com/p/geoxml3/">geoxml3</a>.</h4>-->







                                        <!-- <button onclick="hide_polys_kml();">hide polylines</button>

                                       

                                        <button onclick="unhide_polys_kml();">unhide polylines</button> 

                                       

                                         <button onclick="hide_kml();">hide</button>

                                       

                                         <button onclick="unhide_kml();">unhide</button>

                                       

                                         <button onclick="hide_markers_kml();">hide markers</button>

                                       

                                         <button onclick="unhide_markers_kml();">show markers</button>

                                       

                                         <button onclick="load_kmlLayer();">load kmlLayer</button>

                                       

                                         <button onclick="hide_kmlLayer();">hide kmlLayer</button>

                                       

                                         <button onclick="show_kmlLayer();">show kmlLayer</button>

                                       

                                         <button onclick="highlightLine();">RealTime</button>-->





                                        <!--  <button onclick="reload_kml();">reload</button> -->



                                        <div id="loaddiv">Loading.....&#160;&#160;&#160; please wait!<br></div>







                                        <table style="width:100%;">



                                            <tr>



                                                <td>  



                                                    <div id="map_canvas"></div>



                                                </td>



                                                <td>



                                                    <div id="sidebar" style="width:300px;height:600px; overflow:auto ; display:none"></div>



                                                </td>



                                                <td>



                                                    <!--  Legend for the map on the right down corner -->



                                                    <div id="legend" class='my-legend' style="visibility:hidden" >



                                                        <div class='legend-title'>Legende Verlustzeiten:</div>



                                                        <div class='legend-scale'>



                                                            <ul class='legend-labels'>



                                                                <li><span style='background:#00B300;'></span>   &lt;  5 min</li>



                                                                <li><span style='background:#FFFF00;'></span>   &lt;  10 min</li>



                                                                <li><span style='background:#FFA500;'></span>   &lt;  15 min</li>



                                                                <li><span style='background:#FF0000;'></span>   &ge; 15 min</li>



                                                            </ul>



                                                        </div>



                                                        <div class='legend-source'>powerd by: <img src="SWISSTRAFFIC.jpg" alt="No Image" width="60" height="20" /><img src="A9-Logo.JPG" alt="No Image" width="30" height="15"/></div>



                                                    </div>



                                                    <!--  Legend for the map on the right down corner -->



                                                </td>







                                            </tr>







                                        </table>



                                        <div id="map_text">







                                        </div>



                                        <div id="kmlstatus"></div>







 <!--<input id="address" value="" />-->



                                        <script src="http://www.google-analytics.com/urchin.js" type="text/javascript">



                                        </script>



 <!-- <input id="geocode" value="Geocode" type="button"onclick="codeAddress();" />-->



                                        <script type="text/javascript">



                                            _uacct = "UA-162157-1";

                                            urchinTracker();</script>




                                        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
                                        

                                        <script type="text/javascript" src="http://mobility.center/vispertaltunnel2/VISPERTALTUNNEL4/libararies/geoxml3.js"></script>

                                        <script type="text/javascript" src="http://mobility.center/vispertaltunnel2/VISPERTALTUNNEL4/libararies/ProjectedOverlay.js"></script>

  					<script type="text/javascript" src="http://mobility.center/vispertaltunnel2/VISPERTALTUNNEL4/libararies/jquery-1.10.2.js"></script>


                                        <script type="text/javascript" src="http://mobility.center/vispertaltunnel2/VISPERTALTUNNEL4/libararies/markerwithlabel.js"></script>

                                        <script type="text/javascript" src="http://mobility.center/vispertaltunnel2/VISPERTALTUNNEL4/libararies/richmarker.js"></script>
                                    </body>



                                </html>


